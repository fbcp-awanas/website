digraph awanas {

concentrate=true;

node [shape=record];

// Rank-order
{
    node [shape=plaintext];
    edge [style=invis];
    abstract -> primary -> secondary -> tertiary -> tracker;
}
{
    { rank=same; abstract; A_person; A_contact; }
    { rank=same; primary; family; club; inv; expenses; };
    { rank=same; secondary; clubber; parent; handbook; leader; };
    { rank=same; tertiary; visitor; section; };
    { rank=same; tracker; finance; points; attendance; l_attendance; award; activity; };
}

//Abstract Models
{
    A_person [color=blue label="A_Person|{First Name|
                                          Last Name|
                                          full_name()}"];
    A_contact [color=blue label="A_Contact|{Address|
                                            City|
                                            State|
                                            Zip|
                                            Phone|
                                            Email}"];
}

// People
{
    leader [color=magenta label="<id>Leader|{Position|
                                             <club>Club|
                                             Group|
                                             Schedule|
                                             <check_in>check_in()}"];
    clubber [color=darkgreen label="<id>Clubber|{<family>Family|
                                                 <dob>DOB|
                                                 Grade|
                                                 Gender|
                                                 Allergies|
                                                 Medications|
                                                 Special Instructions|
                                                 Photo Release|
                                                 Medical Release|
                                                 Notes|
                                                 <club>Club|
                                                 Group|
                                                 Color|
                                                 <age>age()|
                                                 <get_points>get_points()|
                                                 <add_points>add_points()|
                                                 <assign>assign_book()|
                                                 <award>give_award()|
                                                 <visitor>add_visitor()|
                                                 <record>perm_record()}"];
    visitor [label="<id>Visitor|
                    {<visiting>Guest of|
                    Date}"];
    parent [label="<id>Parent|{<family>Family|
                               <pref_ph>Prefer Phone|
                               <pref_e>Prefer Email}"];
    family [color=darkorange label="<id>Family|{Slug|
                                                ICEContact|
                                                ICEPhone|
                                                Pickup|
                                                Attend Church|
                                                Church Name|
                                                <get_clubbers>get_clubbers()|
                                                <get_parents>get_parents()|
                                                <get_contacts>get_contacts()|
                                                <get_family>get_family()|
                                                <balance>get_balancesheet()|
                                                <add_payment>add_payment()}"];
}

// Club Info
 {
    club [color=red label="<id>Club|{Name|
                                     Age|
                                     <list_awards>list_awards()|
                                     <list_clubbers>list_clubbers()|
                                     <attendance>get_attendance()}" ];
    handbook [label="<id>Handbook|{Name|
                                   <club>Club|
                                   Entrance Book|
                                   Extra Credit|
                                   <inv>Inventory Number|
                                   Verses|
                                   sections()}"];
    section [label="<id>Section|{Name|
                                 <book>Book|
                                 Content|
                                 In Order|
                                 Points}"];
    inv [label="<id>Inventory|{<id>Item #|
                               Quantity|
                               <club>Club|
                               Category|
                               Order Threshold|
                               Description|
                               Picture|
                               Price}"];
    activity [label="<id>Activity|{<clubber>Clubber|
                                   <section>Section|
                                   Complete|
                                   Date|
                                   <leader>Leader}"];
    points [label="<id>Points|{<clubber>Clubber|
                               Points|
                               Reason|
                               Date|
                               <leader>Leader}"];
    award [label="<id>Awards|{<clubber>Clubber|
                              Description|
                              Date Awarded|
                              Delivered}"];
    attendance [label="<id>Attendance|{<clubber>Clubber|
                                       Date}"];
    l_attendance [label="<id>Leader Attendance|{<leader>Leader|
                                                Date}"];
    finance [label="<id>Finance|{<family>Family|
                                 Amount|
                                 Description|
                                 Date|
                                 Method}"];
    expenses [label="<id>Expenses|{Date|
                                   Receipt Date|
                                   Receipt Store|
                                   Items|
                                   Category|
                                   Amount|
                                   Payee}"];
}



// Abstract Model Relationships
{
    edge [color=blue style=dashed arrowhead=inv]
    A_person:w -> leader:n
    A_contact:w -> leader:n
    A_person:w -> parent:n
    A_contact:w -> parent:n
    A_contact:w -> family:n
    A_person:w -> clubber:n
    A_person:w -> visitor:n
}

// Foreign Keys
// -> family
{
    edge [color=darkorange]
    clubber:family -> family:id:w
    parent:family -> family:id:w
    finance:family -> family:id:w
}

// -> clubber
{
    edge [color=darkgreen]
    visitor:visiting -> clubber:id:w
    activity:clubber -> clubber:id:w
    points:clubber -> clubber:id:w
    award:clubber -> clubber:id:w
    attendance:clubber -> clubber:id:w
}

// -> club
{
    edge [color=red]
    clubber:club -> club:id:w
    handbook:club -> club:id:w
    leader:club -> club:id:w
    inv:club -> club:id:w
}

// -> leader
{
    edge [color=magenta]
    points:leader -> leader:id:w
    l_attendance:leader -> leader:id:w
    activity:leader -> leader:id:w
}

// -> *
{
    handbook:inv -> inv:id:w
    section:book -> handbook:id:w
    activity:section -> section:id:w

}

// Family methods
//family:balance -> finance:family [color=grey label=Find];
//family:get_contacts -> parent:family [color=grey label=Find];
//family:get_family -> clubber:family [color=grey label=Find];
//family:get_family -> parent:family [color=grey label=Find];
//family:add_payment -> finance:id [color=grey label=Create];

// Clubber methods
//clubber:get_points -> points:clubber [color=grey label=Find]
//clubber:add_points -> points:id [color=grey label=Create]
//clubber:assign -> activity:id [color=grey label=Create]
//clubber:award -> award:id [color=grey label=Create]
//clubber:visitor -> visitor:id [color=grey label=Create]

// Leader methods
//leader:check_in -> l_attendance:id [color=grey label=Create]

// Club methods
//club:list_awards -> award:clubber [color=grey label=Find]
//club:list_clubbers -> clubber:club [color=grey label=Find]
//club:attendance -> attendance:clubber [color=grey label=Find]
}

